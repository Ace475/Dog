<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokémon Mobile Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .game-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .header {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            text-align: center;
            position: relative;
            z-index: 100;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            font-size: 14px;
            margin-top: 5px;
        }

        .battlefield {
            flex: 1;
            position: relative;
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 70%, #228B22 100%);
            overflow: hidden;
        }

        .clouds {
            position: absolute;
            top: 10%;
            width: 100%;
            height: 30%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><circle cx="20" cy="10" r="8" fill="white" opacity="0.7"/><circle cx="30" cy="8" r="6" fill="white" opacity="0.7"/><circle cx="70" cy="12" r="7" fill="white" opacity="0.7"/><circle cx="80" cy="9" r="5" fill="white" opacity="0.7"/></svg>') repeat-x;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(100px); }
        }

        .pokemon {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: bounce 2s infinite ease-in-out;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .pokemon:active {
            transform: scale(0.9);
        }

        .pokemon.caught {
            animation: spin 0.5s ease-in-out;
        }

        @keyframes spin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(0); }
        }

        .controls {
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .pokeball {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(to bottom, #ff6b6b 50%, white 50%);
            border: 3px solid #333;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pokeball:active {
            transform: scale(0.9);
        }

        .pokeball::after {
            content: '';
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 2px solid #333;
            position: absolute;
        }

        .throw-animation {
            animation: throw 0.8s ease-out forwards;
        }

        @keyframes throw {
            0% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-200px) scale(0.8); }
            100% { transform: translateY(-400px) scale(0.3); opacity: 0; }
        }

        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 18px;
            text-align: center;
            z-index: 200;
            animation: fadeInOut 2s ease-in-out;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffeb3b;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle 0.6s ease-out forwards;
        }

        @keyframes sparkle {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0) translateY(-50px); }
        }

        .sound-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <button class="sound-toggle" onclick="toggleSound()">🔊</button>
        
        <div class="header">
            <h1>Pokémon Catcher</h1>
            <div class="stats">
                <span>Caught: <span id="caught">0</span></span>
                <span>Pokéballs: <span id="pokeballs">10</span></span>
                <span>Score: <span id="score">0</span></span>
            </div>
        </div>

        <div class="battlefield">
            <div class="clouds"></div>
        </div>

        <div class="controls">
            <div class="pokeball" onclick="throwPokeball()"></div>
            <button style="background: #4CAF50; color: white; border: none; padding: 15px 25px; border-radius: 25px; font-size: 16px; cursor: pointer;" onclick="restartGame()">
                New Game
            </button>
        </div>
    </div>

    <script>
        let gameState = {
            caught: 0,
            pokeballs: 10,
            score: 0,
            soundEnabled: true,
            currentPokemon: null
        };

        const pokemonTypes = [
            { emoji: '⚡', name: 'Pikachu', color: '#ffeb3b', points: 100 },
            { emoji: '🔥', name: 'Charmander', color: '#ff5722', points: 120 },
            { emoji: '💧', name: 'Squirtle', color: '#2196f3', points: 110 },
            { emoji: '🌿', name: 'Bulbasaur', color: '#4caf50', points: 115 },
            { emoji: '👻', name: 'Gastly', color: '#9c27b0', points: 150 },
            { emoji: '⭐', name: 'Staryu', color: '#ff9800', points: 130 },
            { emoji: '🦋', name: 'Butterfree', color: '#e91e63', points: 125 },
            { emoji: '🐉', name: 'Dragonite', color: '#ff6b6b', points: 200 }
        ];

        // Audio context for sound effects
        let audioContext;
        
        function initAudio() {
            if (!audioContext) {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    
                    // Resume context if suspended (required for mobile)
                    if (audioContext.state === 'suspended') {
                        audioContext.resume();
                    }
                } catch (e) {
                    console.warn('Audio not supported');
                    gameState.soundEnabled = false;
                }
            }
        }

        function playSound(frequency, duration, type = 'sine') {
            if (!gameState.soundEnabled) return;
            
            try {
                initAudio();
                if (!audioContext || audioContext.state === 'suspended') return;
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                oscillator.type = type;
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            } catch (e) {
                console.warn('Sound playback failed');
            }
        }

        function playCatchSound() {
            playSound(523, 0.1);
            setTimeout(() => playSound(659, 0.1), 100);
            setTimeout(() => playSound(784, 0.2), 200);
        }

        function playThrowSound() {
            playSound(400, 0.1, 'square');
            setTimeout(() => playSound(300, 0.1, 'square'), 100);
        }

        function playMissSound() {
            playSound(200, 0.3, 'sawtooth');
        }

        function spawnPokemon() {
            // Don't spawn if there's already a pokemon
            if (gameState.currentPokemon && gameState.currentPokemon.parentNode) {
                return;
            }

            const battlefield = document.querySelector('.battlefield');
            const pokemon = pokemonTypes[Math.floor(Math.random() * pokemonTypes.length)];
            
            const pokemonEl = document.createElement('div');
            pokemonEl.className = 'pokemon';
            pokemonEl.innerHTML = pokemon.emoji;
            pokemonEl.style.backgroundColor = pokemon.color;
            pokemonEl.style.left = Math.random() * (window.innerWidth - 120) + 'px';
            pokemonEl.style.top = Math.random() * (battlefield.offsetHeight - 200) + 100 + 'px';
            
            pokemonEl.dataset.points = pokemon.points;
            pokemonEl.dataset.name = pokemon.name;
            
            pokemonEl.onclick = () => catchPokemon(pokemonEl, pokemon);
            
            battlefield.appendChild(pokemonEl);
            gameState.currentPokemon = pokemonEl;
            
            // Remove pokemon after 4 seconds if not caught
            const timeoutId = setTimeout(() => {
                if (pokemonEl.parentNode && !pokemonEl.classList.contains('caught')) {
                    pokemonEl.remove();
                    if (gameState.currentPokemon === pokemonEl) {
                        gameState.currentPokemon = null;
                    }
                    setTimeout(spawnPokemon, 1000);
                }
            }, 4000);
            
            // Store timeout ID for cleanup
            pokemonEl.dataset.timeoutId = timeoutId;
        }

        function throwPokeball() {
            if (gameState.pokeballs <= 0) {
                showMessage("No Pokéballs left! Start a new game.");
                return;
            }

            if (!gameState.currentPokemon || !gameState.currentPokemon.parentNode) {
                showMessage("No Pokémon to catch!");
                return;
            }

            const pokeballEl = document.querySelector('.pokeball');
            const newPokeball = pokeballEl.cloneNode(true);
            newPokeball.className = 'pokeball throw-animation';
            newPokeball.onclick = null;
            
            document.querySelector('.controls').appendChild(newPokeball);
            
            gameState.pokeballs--;
            updateStats();
            playThrowSound();
            
            setTimeout(() => {
                newPokeball.remove();
                if (gameState.currentPokemon && gameState.currentPokemon.parentNode && Math.random() < 0.7) {
                    catchPokemon(gameState.currentPokemon);
                } else {
                    playMissSound();
                    showMessage("The Pokémon escaped!");
                }
            }, 800);
        }

        function catchPokemon(pokemonEl, pokemon) {
            if (!pokemonEl || !pokemonEl.parentNode) return;
            
            // Prevent double-catching
            if (pokemonEl.classList.contains('caught')) return;
            
            pokemonEl.className = 'pokemon caught';
            playCatchSound();
            
            const points = parseInt(pokemonEl.dataset.points);
            gameState.caught++;
            gameState.score += points;
            
            createParticles(pokemonEl);
            showMessage(`Caught ${pokemonEl.dataset.name}! +${points} points`);
            
            setTimeout(() => {
                if (pokemonEl.parentNode) {
                    pokemonEl.remove();
                }
                gameState.currentPokemon = null;
                updateStats();
                setTimeout(spawnPokemon, 1500);
            }, 500);
        }

        function createParticles(element) {
            const rect = element.getBoundingClientRect();
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = rect.left + rect.width / 2 + 'px';
                particle.style.top = rect.top + rect.height / 2 + 'px';
                particle.style.transform = `rotate(${i * 45}deg) translateX(30px)`;
                document.body.appendChild(particle);
                
                setTimeout(() => particle.remove(), 600);
            }
        }

        function showMessage(text) {
            const existingMessage = document.querySelector('.message');
            if (existingMessage) existingMessage.remove();
            
            const message = document.createElement('div');
            message.className = 'message';
            message.textContent = text;
            document.querySelector('.game-container').appendChild(message);
            
            setTimeout(() => message.remove(), 2000);
        }

        function updateStats() {
            document.getElementById('caught').textContent = gameState.caught;
            document.getElementById('pokeballs').textContent = gameState.pokeballs;
            document.getElementById('score').textContent = gameState.score;
            
            if (gameState.pokeballs <= 0) {
                // Clear any existing pokemon
                if (gameState.currentPokemon && gameState.currentPokemon.parentNode) {
                    clearTimeout(gameState.currentPokemon.dataset.timeoutId);
                    gameState.currentPokemon.remove();
                    gameState.currentPokemon = null;
                }
                
                setTimeout(() => {
                    showMessage(`Game Over! Final Score: ${gameState.score}\nCaught ${gameState.caught} Pokémon!`);
                }, 1000);
            }
        }

        function restartGame() {
            // Clear existing pokemon and timeouts
            document.querySelectorAll('.pokemon').forEach(p => {
                if (p.dataset.timeoutId) {
                    clearTimeout(p.dataset.timeoutId);
                }
                p.remove();
            });
            document.querySelectorAll('.message').forEach(m => m.remove());
            document.querySelectorAll('.throw-animation').forEach(t => t.remove());
            
            gameState = {
                caught: 0,
                pokeballs: 10,
                score: 0,
                soundEnabled: gameState.soundEnabled,
                currentPokemon: null
            };
            
            updateStats();
            setTimeout(spawnPokemon, 1000);
        }

        function toggleSound() {
            gameState.soundEnabled = !gameState.soundEnabled;
            document.querySelector('.sound-toggle').textContent = gameState.soundEnabled ? '🔊' : '🔇';
        }

        // Touch event handling for better mobile experience
        document.addEventListener('touchstart', function(e) {
            // Enable audio on first touch (required for mobile browsers)
            if (audioContext && audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            // Prevent zoom on double tap
            if (e.touches.length > 1) {
                e.preventDefault();
            }
            
            let touchTime = new Date().getTime();
            if (touchTime - this.lastTouch < 300) {
                e.preventDefault();
            }
            this.lastTouch = touchTime;
        }, { passive: false });

        // Prevent context menu on long press
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        // Initialize game
        updateStats();
        setTimeout(spawnPokemon, 2000);
        
        // Show initial instructions
        setTimeout(() => {
            showMessage("Tap Pokémon to catch them or use the Pokéball!");
        }, 500);
    </script>
</body>
</html>